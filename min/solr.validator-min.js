/*!  Version 2.0.1 | solrValidator | Copyright (c) 2015 HowardsHome | MIT License | http://www.howardshome.com/license */
;var solrValidator=function(e,d,c,b,a){e=typeof e!=="undefined"?e:"nl";c=typeof c!=="undefined"?c:null;d=typeof d!=="undefined"?d:"normal";b=typeof b!=="undefined"?b:4000;a=typeof a!=="undefined"?a:false;$.solrValidatorMessages.init(solrValidatorTranslations,e);this.query=null;this.allowedSolrFields=c;this.mode=d;this.errorMessages=null;this.maxLength=b;this.queryParts=[];this.UseConsoleLog=a;if(this.UseConsoleLog){console.log("UseConsoleLog is set to TRUE")}};solrValidator.prototype={validate:function(a){a=typeof a!=="undefined"?a:"";if(a==null||a.length<=0){this.errorMessages=new Array();this.errorMessages.push($.solrValidatorMessages.get("EmptyQuery"))}if(a!=null&&a.length>0&&a.length>this.maxLength){this.errorMessages=new Array();this.errorMessages.push($.solrValidatorMessages.get("QueryToLong")+this.maxLength)}if(a!=null&&a.length>0&&a.length<=this.maxLength){this.query=a.replace(/\\./g,"\\ ");this.errorMessages=new Array();if(this.mode=="strict"){this.checkStrict()}if(this.mode=="normal"){this.checkNormal()}}},checkStrict:function(){if(this.UseConsoleLog){console.log("using checkStrict")}this.checkAllowedCharacters();this.inValidQuotes();this.checkParentheses();this.checkSlash();this.checkQuotes();this.checkAsteriskNotAllowed();this.checkORInParenthesisBegin();this.checkORInParenthesisEnd();this.checkColon();this.checkColonAtBeginning();this.checkCaret();this.checkSquiggle();this.checkDoNotUseAND();this.checkAmpersands();this.checkExclamationMark();this.checkQuestionMarkNotAllowed();this.checkPlusMinus();this.checkDoubleOR();this.checkInvalidNot()},checkNormal:function(){if(this.UseConsoleLog){console.log("using checkNormal")}this.checkNormalAllowedCharacters();this.inValidQuotes();this.checkParentheses();this.checkSlash();this.checkQuotes();this.checkAsterisk();this.checkStartingWithAWildCard();this.checkStartingWithANot();this.checkORInParenthesisBegin();this.checkORInParenthesisEnd();this.checkANDInParenthesis();this.checkColonAtEnd();this.checkColonAtBeginning();this.checkAllowedFields();this.checkCaret();this.checkNearSquiggle();this.checkAmpersands();this.checkExclamationMark();this.checkQuestionMark();this.checkColon();this.checkInvalidNot();this.checkDoubleOR();this.checkDoubleAND();this.checkPlusMinus()},removeValidPhrasePatterns:function(b){var a=/((([A-Za-z]+:)|-|\+)*("[^"]*")|"[^"]*")/g;b=b.replace(a,"");return b.trim()},removePhrases:function(b){var a=/"([^"]*)"/g;b=b.replace(a,"");return b.trim()},checkAllowedCharacters:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkAllowedCharacters",a)}matches=a.match(/[^a-zA-Z0-9\x80-\xFF_+\-:.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidCharacter"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidCharacter"))}}},checkNormalAllowedCharacters:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkNormalAllowedCharacters",a)}matches=a.match(/[^a-zA-Z0-9\x80-\xFF_+\-:,.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidCharacter"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidCharacter"))}}},checkDoNotUseAND:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkDoNotUseAND",a)}matches=a.match(/^AND(\s{1})|(\s{1})AND(\s{1})|(\s{1})AND$/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DoNotUseAnd"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DoNotUseAnd"))}}},inValidQuotes:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("inValidQuotes",a)}matches=a.match(/[“”‘???’?„?”]/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidQuotes"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidQuotes"))}}},checkAsterisk:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkAsterisk (1)",a)}a=this.removeValidPhrasePatterns(a);if(this.UseConsoleLog){console.log("checkAsterisk (2)",a)}if(a.trim()!=""){matches=a.match(/^[\*]*$|[\s]\*|^\*[^\s]/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidWildCardUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidWildCardUsage"))}}}},checkAsteriskNotAllowed:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkAsteriskNotAllowed",a)}matches=a.match(/\*/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("NoWildCardUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("NoWildCardUsage"))}}},checkStartingWithAWildCard:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkStartingWithAWildCard (1)",a)}a=this.removeValidPhrasePatterns(a);if(this.UseConsoleLog){console.log("checkStartingWithAWildCard (2)",a)}if(a!=""){matches=a.match(/(\s{1,})[*|\?][a-zA-Z0-9\x80-\xFF_+\-:.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]|^[*|\?][a-zA-Z0-9\x80-\xFF_+\-:.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]|(:|[(])[*|\?][a-zA-Z0-9\x80-\xFF_+\-:.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidWildCardUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidWildCardUsage"))}}}},checkStartingWithANot:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkStartingWithANot (1)",a)}matches=a.match(/^[-](\s){0,}[a-zA-Z0-9\x80-\xFF_+\-:.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]|^([N|n][O|o][T|t])(\s{1,})([a-zA-Z0-9\x80-\xFF_+\-:.()~\^"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]{0,})$/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidNotUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidNotUsage"))}}a=this.removeValidPhrasePatterns(a);if(this.UseConsoleLog){console.log("checkStartingWithANot (2)",a)}if(a!=""){matches2=a.match(/^(\s{0,})([N|n][O|o][T|t])(\s{0,})$/);if(matches2!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidNotUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidNotUsage"))}}}},checkParentheses:function(c){c=typeof c!=="undefined"?c:this.query;if(this.UseConsoleLog){console.log("checkParentheses",c)}var b=false;var a=false;matchLeft=c.match(/[(]/g);if(matchLeft!=null){b=true}matchRight=c.match(/[)]/g);if(matchRight!=null){a=true}if(b||a){if(b&&!a||a&&!b){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DidNotCloseParentheses"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DidNotCloseParentheses"))}}else{var d=matchLeft.length+matchRight.length;if((d%2)>0||matchLeft.length!=matchRight.length){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DidNotCloseParentheses"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DidNotCloseParentheses"))}}}matches=this.query.match(/\(\)/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidParentheses"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidParentheses"))}}}},checkAmpersands:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkAmpersands",a)}matches=a.match(/[&]{2}/);if(matches!=null&&matches.length>0){matches=a.match(/&&/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DoubleAmpersands"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DoubleAmpersands"))}}}},checkCaret:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkCaret (1)",a)}a=this.removeValidPhrasePatterns(a);if(this.UseConsoleLog){console.log("checkCaret (2)",a)}if(a.trim()!=""){matches=a.match(/\^/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("CaretNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("CaretNotAllowed"))}}}},checkSquiggle:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkSquiggle",a)}matches=a.match(/~/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("SquiggleNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("SquiggleNotAllowed"))}}},checkNearSquiggle:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkNearSquiggle (1)",a)}matches=a.match(/~/g);if(matches!=null){a=a.replace(/[\"][\w\d ]*[\"]( ){0,1}[\~][\d]+/g,"");a=this.removePhrases(a);InvalidBoostMatches=a.match(/~/g);if(InvalidBoostMatches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidNearUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidNearUsage"))}}}},checkExclamationMark:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkExclamationMark",a)}a=this.removePhrases(a);if(this.UseConsoleLog){console.log("checkExclamationMark (2)",a)}matches=a.match(/^!|[a-zA-Z0-9\x80-\xFF_+\-:.()\"*?&|!{}\[\]\^~\\@#\/$%'=] ! [a-zA-Z0-9\x80-\xFF_+\-:.()\"*?&|!{}\[\]\^~\\@#\/$%'=]|!$/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidExclamationMarkUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidExclamationMarkUsage"))}}},checkQuestionMark:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkQuestionMark",a)}a=this.removePhrases(a);if(this.UseConsoleLog){console.log("checkQuestionMark (2)",a)}matches=a.match(/( )+\?( )+|( )+\?$|^\?( )+|\:\?( )+/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidQuestionMarkUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidQuestionMarkUsage"))}}},checkQuestionMarkNotAllowed:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkQuestionMarkNotAllowed",a)}matches=a.match(/\?/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("NoSingleWildCardUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("NoSingleWildCardUsage"))}}},checkPlusMinus:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkPlusMinus (1)",a)}a=this.removeValidPhrasePatterns(a);if(this.UseConsoleLog){console.log("checkPlusMinus (2)",a)}if(a.trim()!=""){matches=a.match(/^\[-\+](\s{1})|(\s{1})[-\+](\s{1})|^[-\+]$|(\s{1})[-\+]$/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidPlusMinusUsage"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidPlusMinusUsage"))}}}},checkInvalidNot:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkInvalidNot",a)}matches=a.match(/(OR( )*-|OR( )*NOT)/g);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("InvalidNot"))==-1){this.errorMessages.push($.solrValidatorMessages.get("InvalidNot"))}}},checkDoubleOR:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkDoubleOR",a)}matches=a.match(/^(OR( ){1,}OR( ){1,}){1,}|(( ){1,}OR( ){1,}OR( ){1,}){1,}|(( ){1,}OR( ){1,}OR){1,}$/);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DoubleOr"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DoubleOr"))}}},checkDoubleAND:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkDoubleAND",a)}matches=a.match(/(\s+    AND){2,}/g);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DoubleAnd"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DoubleAnd"))}}},checkORInParenthesisEnd:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkORInParenthesis",a)}matches=a.match(/( OR( )*\))/g);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("checkORInParenthesisEnd"))==-1){this.errorMessages.push($.solrValidatorMessages.get("checkORInParenthesisEnd"))}}},checkORInParenthesisBegin:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkORInParenthesis",a)}matches=a.match(/(\(( )*OR( ){1,})/g);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("checkORInParenthesisBegin"))==-1){this.errorMessages.push($.solrValidatorMessages.get("checkORInParenthesisBegin"))}}},checkANDInParenthesis:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkANDInParenthesis",a)}matches=a.match(/( AND( )*\))/g);if(matches!=null&&matches.length>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("checkANDInParenthesis"))==-1){this.errorMessages.push($.solrValidatorMessages.get("checkANDInParenthesis"))}}},checkSlash:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkSlash (1)",a)}a=this.removePhrases(a);if(this.UseConsoleLog){console.log("checkSlash (2)",a)}matches=a.match(/\//);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("ForwardSlashNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("ForwardSlashNotAllowed"))}}matches=a.match(/\\/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("BackwardSlashNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("BackwardSlashNotAllowed"))}}},checkQuotes:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkQuotes",a)}matches=a.match(/\"/g);if(matches!=null&&matches.length>0){var b=matches.length;if((b%2)>0){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DidNotCloseQuotes"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DidNotCloseQuotes"))}}matches=a.match(/""/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("EmptyQuotes"))==-1){this.errorMessages.push($.solrValidatorMessages.get("EmptyQuotes"))}}}},checkColonAtEnd:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkColonAtEnd",a)}matches=a.match(/:$/);if(matches!=null){if(this.mode=="normal"){if(this.errorMessages.indexOf($.solrValidatorMessages.get("SingleColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("SingleColonNotAllowed"))}}else{if(this.errorMessages.indexOf($.solrValidatorMessages.get("ColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("ColonNotAllowed"))}}}},checkColonAtBeginning:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkColonAtBeginning",a)}matches=a.match(/^:/);if(matches!=null){if(this.mode=="normal"){if(this.errorMessages.indexOf($.solrValidatorMessages.get("SingleColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("SingleColonNotAllowed"))}}else{if(this.errorMessages.indexOf($.solrValidatorMessages.get("ColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("ColonNotAllowed"))}}}},checkColon:function(a){a=typeof a!=="undefined"?a:this.query;if(this.UseConsoleLog){console.log("checkColon",a)}if(this.allowedSolrFields!=null&&this.allowedSolrFields.length>0){matches=a.match(/ :[a-zA-Z0-9\x80-\xFF_+\-.()~\^\"*?&|!{}\[\]\\@#\/$%'= \r\n“”‘???’?„?”]| :$/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("SingleColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("SingleColonNotAllowed"))}}matches=a.match(/:{2,}/);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("DoubleColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("DoubleColonNotAllowed"))}}}else{matches=a.match(/:/g);if(matches!=null){if(this.errorMessages.indexOf($.solrValidatorMessages.get("ColonNotAllowed"))==-1){this.errorMessages.push($.solrValidatorMessages.get("ColonNotAllowed"))}}}},checkAllowedFields:function(b){b=typeof b!=="undefined"?b:this.query;if(this.UseConsoleLog){console.log("checkAllowedFields (1)",b)}if(this.allowedSolrFields!=null&&this.allowedSolrFields.length>0){var c=true;b=this.removePhrases(b);if(this.UseConsoleLog){console.log("checkAllowedFields (2)",b)}matches=b.match(/[a-zA-Z0-9\x80-\xFF_]+:/g);if(matches!=null){for(i=0;i<matches.length;i++){var a=this.allowedSolrFields.indexOf("|"+matches[i]+"|");if(a==-1){c=false}}if(!c){this.errorMessages.push($.solrValidatorMessages.get("NotAllowedField"));if(this.errorMessages.indexOf($.solrValidatorMessages.get("NotAllowedField"))==-1){this.errorMessages.push($.solrValidatorMessages.get("NotAllowedField"))}}}}}};